<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>FNAF - Fixed UI</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Courier New', monospace; }
        
        /* Fixed UI Overlay */
        #ui { 
            position: absolute; 
            width: 100%; 
            height: 100%; 
            pointer-events: none; 
            z-index: 10; 
            padding: 20px;
            box-sizing: border-box; /* Ensures padding doesn't push elements off screen */
        }
        
        .stats { color: #0f0; font-size: 1.5em; text-shadow: 0 0 5px #0f0; }
        
        /* Adjusted Clock Positioning */
        #clock { 
            position: absolute; 
            top: 20px; 
            right: 40px; /* More breathing room from the edge */
            text-align: right;
            min-width: 150px;
        }

        #power-display {
            position: absolute;
            bottom: 40px;
            left: 40px;
        }

        #static-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 100;
            background: url('https://upload.wikimedia.org/wikipedia/commons/0/02/Television_static.gif');
            opacity: 0.05;
        }
        #screen-msg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            display: none; z-index: 1000; align-items: center; justify-content: center;
            font-size: 5em; font-weight: bold; flex-direction: column; text-align: center;
        }
    </style>
</head>
<body>

    <div id="static-overlay"></div>
    <div id="screen-msg"></div>
    
    <div id="ui">
        <div class="stats" id="power-display">POWER: 100%</div>
        <div class="stats" id="clock">12 AM</div>
    </div>

    <script type="importmap">
      { 
         "imports": { 
              "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
              "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
          } 
      }
    </script>

    <script type="module">
       import * as THREE from 'three';
import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';

const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);

// Adjusted camera to be slightly back and up to see the scene
camera.position.set(0, 2, 10); 

const renderer = new THREE.WebGLRenderer({ antialias: true });
renderer.setSize(window.innerWidth, window.innerHeight);
// Important for GLTF colors/brightness
renderer.outputColorSpace = THREE.SRGBColorSpace; 
document.body.appendChild(renderer.domElement);

// --- LIGHTING (The likely culprit) ---
// Increased intensity so you can actually see the model
const ambientLight = new THREE.AmbientLight(0xffffff, 0.5); 
scene.add(ambientLight);

const sunLight = new THREE.DirectionalLight(0xffffff, 1);
sunLight.position.set(5, 10, 7);
scene.add(sunLight);

// --- MODEL LOADING ---
const loader = new GLTFLoader();
loader.load(
    'https://raw.githubusercontent.com/rok8ray/funnisounds/refs/heads/main/3dmodels/temple.glb',
    (gltf) => {
        const model = gltf.scene;
        model.position.set(0, 0, 0);
        scene.add(model);
        console.log("Model loaded successfully");
    },
    (xhr) => { console.log((xhr.loaded / xhr.total * 100) + '% loaded'); },
    (error) => { console.error("Error loading model:", error); }
);

// --- THE REST OF YOUR GAME LOGIC ---
const leftDoor = new THREE.Mesh(new THREE.BoxGeometry(1, 15, 8), new THREE.MeshStandardMaterial({ color: 0x222222 }));
leftDoor.position.set(-8.4, 15, -1); 
scene.add(leftDoor);

const enemy = new THREE.Mesh(
    new THREE.SphereGeometry(1.5), 
    new THREE.MeshStandardMaterial({color: 0xff0000}) 
);
enemy.position.set(-12, -2, -15); 
scene.add(enemy);

// Hallway light (starts OFF)
const hallwayL = new THREE.PointLight(0xffffff, 0, 50);
hallwayL.position.set(-10, 2, -1); 
scene.add(hallwayL);

let mouseX = 0, power = 100, leftOpen = true, isGameOver = false, hour = 0, time = 0;
let enemyActive = false;
let targetZ = -15;

window.addEventListener('mousemove', (e) => mouseX = (e.clientX / window.innerWidth) * 2 - 1);
window.addEventListener('mousedown', (e) => {
    const mouse = new THREE.Vector2((e.clientX/innerWidth)*2-1, -(e.clientY/innerHeight)*2+1);
    const raycaster = new THREE.Raycaster();
    raycaster.setFromCamera(mouse, camera);
    const hits = raycaster.intersectObjects(scene.children);
    hits.forEach(h => {
        if(h.object.userData.type === "doorL") leftOpen = !leftOpen;
        if(h.object.userData.type === "lightL") hallwayL.intensity = hallwayL.intensity ? 0 : 800;
    });
});

function animate() {
    if (isGameOver) return;
    requestAnimationFrame(animate);

    // Subtle camera look-around
    camera.rotation.y += (-mouseX * 0.5 - camera.rotation.y) * 0.05;
    
    leftDoor.position.y = THREE.MathUtils.lerp(leftDoor.position.y, leftOpen ? 15 : 0, 0.1);

    // Power and Time Logic
    time += 1/60; 
    if(time >= 40) { 
        time = 0; hour++; 
        document.getElementById('clock').innerText = (hour === 0 ? 12 : hour) + " AM";
        if(hour === 6) endGame("6 AM<br>YOU WIN", "blue");
    }

    renderer.render(scene, camera);
}
animate();
    </script>
</body>
</html>
